# Decap CMS 配置文件
# 参考: https://decapcms.org/docs/configuration-options/

# 后端配置：使用 Netlify Git Gateway（部署到 Netlify 后生效）
backend:
  name: git-gateway
  branch: main
  # 支持不同平台的 Git 服务
  # base_url: https://your-site.netlify.app
  # auth_endpoint: auth
  commit_messages:
    create: 'Content: create {{collection}} "{{slug}}"'
    update: 'Content: update {{collection}} "{{slug}}"'
    delete: 'Content: delete {{collection}} "{{slug}}"'
    uploadMedia: 'Media: upload "{{path}}"'
    deleteMedia: 'Media: delete "{{path}}"'

# 本地开发时使用 decap-cms 代理（需先运行 npx decap-server）
local_backend: true

# 媒体文件存储配置
media_folder: static/images
public_folder: /images

# 内容集合定义
collections:
  # 中文博客文章
  - name: zh-blog
    label: 中文博客
    folder: content/zh/blog
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    publish_mode: editorial_workflow
    media_folder: static/images/blog
    public_folder: /images/blog
    editor:
      preview: false
    fields:
      - { label: 标题, name: title, widget: 'string' }
      - { label: 发布日期, name: date, widget: 'datetime' }
      - { label: 草稿, name: draft, widget: 'boolean', default: true }
      - label: 状态
        name: status
        widget: select
        options:
          - { label: 草稿, value: 'draft' }
          - { label: 待审核, value: 'pending_review' }
          - { label: 待发布, value: 'pending_publish' }
          - { label: 已发布, value: 'published' }
      - { label: 作者, name: author, widget: 'string', default: 'Your Name' }
      - { label: 描述, name: description, widget: 'string', required: false }
      - label: 封面图片
        name: featured_image
        widget: image
        required: false
        choose_url: false
        media_library:
          config:
            multiple: false
      - { label: 分类, name: categories, widget: 'list', required: false }
      - { label: 标签, name: tags, widget: 'list', required: false }
      - { label: 正文, name: body, widget: 'markdown' }

  # 英文博客文章
  - name: en-blog
    label: English Blog
    folder: content/en/blog
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    publish_mode: editorial_workflow
    media_folder: static/images/blog
    public_folder: /images/blog
    editor:
      preview: false
    fields:
      - { label: Title, name: title, widget: 'string' }
      - { label: Date, name: date, widget: 'datetime' }
      - { label: Draft, name: draft, widget: 'boolean', default: true }
      - label: Status
        name: status
        widget: select
        options:
          - { label: Draft, value: 'draft' }
          - { label: Pending Review, value: 'pending_review' }
          - { label: Pending Publish, value: 'pending_publish' }
          - { label: Published, value: 'published' }
      - { label: Author, name: author, widget: 'string', default: 'Your Name' }
      - { label: Description, name: description, widget: 'string', required: false }
      - label: Featured Image
        name: featured_image
        widget: image
        required: false
        choose_url: false
        media_library:
          config:
            multiple: false
      - { label: Categories, name: categories, widget: 'list', required: false }
      - { label: Tags, name: tags, widget: 'list', required: false }
      - { label: Body, name: body, widget: 'markdown' }

  # 中文文章 (posts)
  - name: zh-posts
    label: 中文文章
    folder: content/zh/posts
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    publish_mode: editorial_workflow
    media_folder: static/images/posts
    public_folder: /images/posts
    editor:
      preview: false
    fields:
      - { label: 标题, name: title, widget: 'string' }
      - { label: 发布日期, name: date, widget: 'datetime' }
      - { label: 草稿, name: draft, widget: 'boolean', default: true }
      - label: 状态
        name: status
        widget: select
        options:
          - { label: 草稿, value: 'draft' }
          - { label: 待审核, value: 'pending_review' }
          - { label: 待发布, value: 'pending_publish' }
          - { label: 已发布, value: 'published' }
      - { label: 作者, name: author, widget: 'string', default: 'Your Name', required: false }
      - { label: 描述, name: description, widget: 'string', required: false }
      - label: 封面图片
        name: featured_image
        widget: image
        required: false
        choose_url: false
        media_library:
          config:
            multiple: false
      - { label: 分类, name: categories, widget: 'list', required: false }
      - { label: 标签, name: tags, widget: 'list', required: false }
      - { label: 正文, name: body, widget: 'markdown' }

  # 英文文章 (posts)
  - name: en-posts
    label: English Posts
    folder: content/en/posts
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    publish_mode: editorial_workflow
    media_folder: static/images/posts
    public_folder: /images/posts
    editor:
      preview: false
    fields:
      - { label: Title, name: title, widget: 'string' }
      - { label: Date, name: date, widget: 'datetime' }
      - { label: Draft, name: draft, widget: 'boolean', default: true }
      - label: Status
        name: status
        widget: select
        options:
          - { label: Draft, value: 'draft' }
          - { label: Pending Review, value: 'pending_review' }
          - { label: Pending Publish, value: 'pending_publish' }
          - { label: Published, value: 'published' }
      - { label: Author, name: author, widget: 'string', default: 'Your Name', required: false }
      - { label: Description, name: description, widget: 'string', required: false }
      - label: Featured Image
        name: featured_image
        widget: image
        required: false
        choose_url: false
        media_library:
          config:
            multiple: false
      - { label: Categories, name: categories, widget: 'list', required: false }
      - { label: Tags, name: tags, widget: 'list', required: false }
      - { label: Body, name: body, widget: 'markdown' }
